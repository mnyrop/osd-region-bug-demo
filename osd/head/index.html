<html>
  <head>
    <title>openseadragon&nbsp;HEAD&nbsp;test</title>
  </head>
  <body>
    <h1>openseadragon&nbsp;HEAD&nbsp;test</h1>
    <p>Using <a href="https://aperitiiif-presentation-api-store.s3.us-east-1.amazonaws.com/wanurasucomic/WR01/manifest.json">iiif manifest</a>, <a href="https://samvera.github.io/serverless-iiif/osd-fix/openseadragon.min.js">script source</a></p>
    <div>
      Switch to
      <ul>
        <li><a href="/osd-region-bug-demo/osd/v3-1-0">openseadragon v3.1.0</a></li>
        <li><a href="/osd-region-bug-demo/osd/v4-1-0">openseadragon v4.1.0</a></li>
        <li><a href="/osd-region-bug-demo/osd/head">openseadragon HEAD (main)</a></li>
        <li><a href="/osd-region-bug-demo/mirador/v3-3-0">mirador v3.3.0</a></li>
        <li><a href="/osd-region-bug-demo/mirador/v4-alpha">mirador v4.0.0-alpha</a></li>
      </ul>
    </div>
    
    <div id="viewer" style="border:1px solid black;height:60vh;position:relative;width:60%;"></div>
<script src="https://samvera.github.io/serverless-iiif/osd-fix/openseadragon.min.js"></script>
<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    var manifestUrl = "https://aperitiiif-presentation-api-store.s3.us-east-1.amazonaws.com/wanurasucomic/WR01/manifest.json";
    fetch(manifestUrl)
    .then(response => {
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      return response.json();
    })
    .then(data => {
      var tileSources = [];
      data.sequences[0].canvases.forEach(function (val) {
        tileSources.push(val.images[0].resource.service['@id'] + '/info.json');
      });
      window.viewer = OpenSeadragon({
        id: "viewer",
        sequenceMode: true,
        prefixUrl: "https://cdn.jsdelivr.net/gh/Benomrans/openseadragon-icons@main/images/",
        tileSources: tileSources,
        placeholderFillStyle: "#FFFFFF",
        showReferenceStrip: true,
        showHomeControl: false
      });
    })
    .catch(error => {
      console.error('Error fetching manifest:', error);
    });
  });
</script>
  </body>
</html>

